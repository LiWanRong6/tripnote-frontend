import{bG as b,a as i,R as f,o,c as a,e as w,aG as c,U as x,aB as y,b as l,w as k,aC as u,S as n,W as B,V as d}from"./index.8abc673a.js";const C={class:"container"},E=d("\u78BA\u8A8D"),v={__name:"EditShareTripnote",setup(N){const s=b(),p=i([{header:[1,2,3,4,!1]},"bold","italic","underline",{align:[]},{color:[]},{background:[]},"image","link","code"]),t=i({_id:"",user:"",title:"",image:[],departure:"",return:"",created:"",post:Date.now(),ispost:"",item:[],rows:[]}),_=async()=>{try{t.ispost=!0,await u.patch("/tripnotes/item/"+s.params.id,t),n.fire({icon:"success",title:"\u6210\u529F",text:"\u5206\u4EAB\u6210\u529F"})}catch{n.fire({icon:"error",title:"\u5931\u6557",text:"\u5206\u4EAB\u5931\u6557"})}};return(async()=>{try{const{data:e}=await u.get("/tripnotes/"+s.params.id);t._id=e.result._id,t.title=e.result.title,t.image=e.result.image,t.departure=e.result.date[0].departure,t.return=e.result.date[0].return,t.created=e.result.date[0].created,t.post=e.result.user.post,t.user=e.result.user.account,t.ispost=e.result.ispost,t.item=e.result.item}catch{n.fire({icon:"error",title:"\u5931\u6557",text:"\u8F09\u5165\u932F\u8AA4"})}})(),(e,T)=>{const m=f("QuillEditor"),h=B;return o(),a("div",C,[w("h1",null,"\u3010\u7DE8\u8F2F\u5206\u4EAB\u884C\u7A0B\u3011"+c(t.title),1),(o(!0),a(x,null,y(t.item,r=>(o(),a("h2",{key:r._id},[d(c(r.attraction.name)+" ",1),l(m,{content:r.content,"onUpdate:content":g=>r.content=g,toolbar:p,contentType:"html"},null,8,["content","onUpdate:content","toolbar"])]))),128)),l(h,{onClick:_},{default:k(()=>[E]),_:1})])}}};export{v as default};
