import{u as h,r as m,a as p,o as b,c as x,b as t,w as s,d as y,e as c,f as A,S as _,_ as R}from"./index.94977f3f.js";import{_ as z,a as Z}from"./FormItem.eced928b.js";import{_ as B}from"./Spin.c156bcbe.js";import"./keysOf.2fa8476a.js";const S={id:"Register"},V=c("h1",null,"\u8A3B\u518A",-1),k=c("input",{class:"registerBtn",type:"submit",value:"\u8A3B\u518A"},null,-1),C={__name:"RegisterView",setup(q){const d=h(),u=m(!1),n=m(!1),a=p({account:"",email:"",password:""}),g=p({account:[{required:!0,message:"\u5E33\u865F\u5FC5\u586B",trigger:"blur"},{min:4,max:20,message:"\u5E33\u865F\u9577\u5EA6\u70BA 4 \u5230 20 \u500B\u5B57",trigger:"blur"},{pattern:/^[a-zA-Z0-9]+$/,message:"\u5E33\u865F\u53EA\u80FD\u7531\u82F1\u6578\u5B57\u7D44\u6210",trigger:"blur"}],email:[{required:!0,message:"\u4FE1\u7BB1\u5FC5\u586B",trigger:"blur"},{pattern:/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z]+$/,message:"\u4FE1\u7BB1\u683C\u5F0F\u932F\u8AA4",trigger:"blur"}],password:[{required:!0,message:"\u5BC6\u78BC\u5FC5\u586B",trigger:"blur"},{min:4,max:20,message:"\u5BC6\u78BC\u9577\u5EA6\u70BA 4 \u5230 20 \u500B\u5B57",trigger:"blur"},{pattern:/^[a-zA-Z0-9]+$/,message:"\u5BC6\u78BC\u53EA\u80FD\u7531\u82F1\u6578\u5B57\u7D44\u6210",trigger:"blur"}]}),f=()=>{var i;!u.value||(n.value=!0,(i=u.value)==null||i.validate(async e=>{try{e?(_.fire({icon:"error",title:"\u5931\u6557",text:e.isAxiosError&&e.response.data?e.response.data.message:"\u767C\u751F\u932F\u8AA4"}),n.value=!1):(await A.post("/users",a),await _.fire({icon:"success",title:"\u6210\u529F",text:"\u8A3B\u518A\u6210\u529F"}),d.push("/"))}catch{await _.fire({icon:"warning",title:"\u5E33\u865F\u5DF2\u88AB\u8A3B\u518A",text:"\u8ACB\u91CD\u65B0\u8F38\u5165"}),n.value=!1}}))};return(i,e)=>{const o=R,l=Z,v=B,w=z;return b(),x("div",S,[V,t(w,{ref_key:"formRef",ref:u,model:a,rules:g,onSubmit:y(f,["prevent"])},{default:s(()=>[t(l,{label:"\u5E33\u865F",path:"account"},{default:s(()=>[t(o,{value:a.account,"onUpdate:value":e[0]||(e[0]=r=>a.account=r),placeholder:"\u8F38\u5165\u5E33\u865F",minlength:"4",maxlength:"20",round:""},null,8,["value"])]),_:1}),t(l,{label:"\u4FE1\u7BB1",path:"email"},{default:s(()=>[t(o,{value:a.email,"onUpdate:value":e[1]||(e[1]=r=>a.email=r),placeholder:"\u8F38\u5165\u4FE1\u7BB1",round:""},null,8,["value"])]),_:1}),t(l,{label:"\u5BC6\u78BC",path:"password"},{default:s(()=>[t(o,{type:"password",value:a.password,"onUpdate:value":e[2]||(e[2]=r=>a.password=r),placeholder:"\u8F38\u5165\u5BC6\u78BC",minlength:"4",maxlength:"20",round:""},null,8,["value"])]),_:1}),t(l,null,{default:s(()=>[t(v,{show:n.value},{default:s(()=>[k]),_:1},8,["show"])]),_:1})]),_:1},8,["model","rules","onSubmit"])])}}};export{C as default};
