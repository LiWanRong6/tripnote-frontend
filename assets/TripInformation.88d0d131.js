import{a8 as A,k as F,aG as S,l as q,q as H,s as Q,y as v,t as P,H as J,x as C,z as K,J as B,P as X,ay as Y,a as h,Q as V,o as Z,c as ee,e as y,b as o,w as r,aD as te,d as ne,aA as T,S as m,V as z,U as E,aE as oe,_ as se}from"./index.94977f3f.js";import{a as ie,_ as ae}from"./DataTable.d874be5a.js";import{_ as re}from"./Modal.2c2869e5.js";import{a as le,_ as ce}from"./FormItem.eced928b.js";import{_ as de}from"./text.b01c4e30.js";import{a as ue,_ as pe}from"./Upload.57622c8b.js";import{_ as me}from"./Spin.c156bcbe.js";import"./Radio.d7adf3cd.js";import"./FocusDetector.ce54ad71.js";import"./index.20db2190.js";import"./keysOf.2fa8476a.js";import"./Card.9ba3ce6d.js";import"./Warning.b66e6d82.js";import"./fade-in-height-expand.cssr.807fc5bd.js";let R=!1;function fe(){if(!!A&&!!window.CSS&&!R&&(R=!0,"registerProperty"in(window==null?void 0:window.CSS)))try{CSS.registerProperty({name:"--n-color-start",syntax:"<color>",inherits:!1,initialValue:"#0000"}),CSS.registerProperty({name:"--n-color-end",syntax:"<color>",inherits:!1,initialValue:"#0000"})}catch{}}const _e=a=>{const{primaryColor:c,successColor:p,warningColor:i,errorColor:e,infoColor:f,fontWeightStrong:b}=a;return{fontWeight:b,rotate:"252deg",colorStartPrimary:S(c,{alpha:.6}),colorEndPrimary:c,colorStartInfo:S(f,{alpha:.6}),colorEndInfo:f,colorStartWarning:S(i,{alpha:.6}),colorEndWarning:i,colorStartError:S(e,{alpha:.6}),colorEndError:e,colorStartSuccess:S(p,{alpha:.6}),colorEndSuccess:p}},ge={name:"GradientText",common:F,self:_e},he=ge,ye=q("gradient-text",`
 display: inline-block;
 font-weight: var(--n-font-weight);
 -webkit-background-clip: text;
 background-clip: text;
 color: #0000;
 white-space: nowrap;
 background-image: linear-gradient(var(--n-rotate), var(--n-color-start) 0%, var(--n-color-end) 100%);
 transition:
 --n-color-start .3s var(--n-bezier),
 --n-color-end .3s var(--n-bezier);
`),be=Object.assign(Object.assign({},P.props),{size:[String,Number],fontSize:[String,Number],type:{type:String,default:"primary"},color:[Object,String],gradient:[Object,String]}),I=H({name:"GradientText",props:be,setup(a){fe();const{mergedClsPrefixRef:c,inlineThemeDisabled:p}=Q(a),i=v(()=>{const{type:s}=a;return s==="danger"?"error":s}),e=v(()=>{let s=a.size||a.fontSize;return s&&(s=K(s)),s||void 0}),f=v(()=>{const s=a.color||a.gradient;if(typeof s=="string")return s;if(s){const w=s.deg||0,_=s.from,g=s.to;return`linear-gradient(${w}deg, ${_} 0%, ${g} 100%)`}}),b=P("GradientText","-gradient-text",ye,he,a,c),k=v(()=>{const{value:s}=i,{common:{cubicBezierEaseInOut:w},self:{rotate:_,[B("colorStart",s)]:g,[B("colorEnd",s)]:n,fontWeight:t}}=b.value;return{"--n-bezier":w,"--n-rotate":_,"--n-color-start":g,"--n-color-end":n,"--n-font-weight":t}}),d=p?J("gradient-text",v(()=>i.value[0]),k,a):void 0;return{mergedClsPrefix:c,compatibleType:i,styleFontSize:e,styleBgImage:f,cssVars:p?void 0:k,themeClass:d==null?void 0:d.themeClass,onRender:d==null?void 0:d.onRender}},render(){const{mergedClsPrefix:a,onRender:c}=this;return c==null||c(),C("span",{class:[`${a}-gradient-text`,`${a}-gradient-text--${this.compatibleType}-type`,this.themeClass],style:[{fontSize:this.styleFontSize,backgroundImage:this.styleBgImage},this.cssVars]},this.$slots)}});const we={id:"Tripinfo"},xe={class:"container"},Se={id:"header"},ve=y("h1",null,"\u65C5\u904A\u8CC7\u8A0A",-1),Ce=E("\u65B0\u589E\u65C5\u904A\u8CC7\u8A0A"),ke={style:{"margin-bottom":"12px"}},Te=E(" \u9EDE\u64CA\u6216\u62D6\u66F3\u5716\u7247\u5230\u6B64\u5340\u57DF "),ze={class:"editor"},Ee=y("input",{type:"submit",value:"\u78BA\u8A8D"},null,-1),je={__name:"TripInformation",setup(a){const c=X(),{account:p}=Y(c),i=h([]),e=h({_id:"",name:"",image:[],description:"",content:"",user:p,ispost:!1,postdate:"",idx:-1,showModal:!1,formValid:!1,submitting:!1});console.log(Date.now());const f=h({name:[{required:!0,message:"\u65C5\u904A\u8CC7\u8A0A\u6A19\u984C\u5FC5\u586B",trigger:"blur"}],image:[{required:!0,message:"\u5716\u7247\u5FC5\u50B3",trigger:"blur"}]}),b=h([{header:[1,2,3,4,!1]},"bold","italic","underline",{align:[]},{color:[]},{background:[]},"image","link","code"]),k=h([{title:"\u6A19\u984C",key:"name"},{title:"Created By",key:"user"},{title:"\u72C0\u614B",key:"ispost",render(n){return n.ispost?C(I,{type:"success"},{default:()=>"\u767C\u5E03"}):C(I,{type:"info"},{default:()=>"\u672A\u767C\u5E03"})}},{title:"\u6642\u9593",key:"postdate"},{title:"\u7DE8\u8F2F",key:"edit",render(n){return C(z,{strong:!0,tertiary:!0,size:"small",onClick:()=>_(n._id,n.idx)},{default:()=>"\u7DE8\u8F2F"})}},{title:"\u522A\u9664",key:"delete",render(n){return C(z,{strong:!0,tertiary:!0,size:"small",class:"bg-red",onClick:()=>w(n._id)},{default:()=>"\u522A\u9664"})}}]),d=h({pageSize:10}),s=async()=>{e.submitting=!0;const n=new FormData;for(const t in e)console.log(e.description),!["_id","idx","formValid","showModal","submitting"].includes(t)&&(t==="image"?e.image.length>0&&n.append(t,e[t][0].file):n.append(t,e[t]));try{if(e._id.length===0){const{data:t}=await T.post("/tripinfos",n);i.push(t.result),m.fire({icon:"success",title:"\u6210\u529F",text:"\u65B0\u589E\u6210\u529F"})}else{const{data:t}=await T.patch("/tripinfos/"+e._id,n);i[e.idx]=t.result,m.fire({icon:"success",title:"\u6210\u529F",text:"\u7DE8\u8F2F\u6210\u529F"})}e.showModal=!1}catch{e.showModal=!1,m.fire({icon:"error",title:"\u5931\u6557",text:"\u65B0\u589E\u5931\u6557"})}},w=n=>{m.fire({icon:"warning",title:"\u78BA\u5B9A\u522A\u9664?",showCancelButton:!0,cancelButtonColor:"#d33"}).then(async t=>{t.isConfirmed&&(await T.delete("/tripinfos/"+n),await m.fire({icon:"success",title:"\u6210\u529F"}),g())}).catch(t=>{m.fire({icon:"error",title:"\u5931\u6557",text:t.isAxiosError?t.response.data.message:t.message})})},_=(n,t)=>{e._id=n,e.image=[],e.idx=t,e.showModal=!0,e.formValid=!1,e.submitting=!1,t>-1?(e.name=i[t].name,e.ispost=i[t].ispost,e.description=i[t].description,e.content=i[t].content,e.postdate=new Date(i[t].postdate).toLocaleDateString()):(e.name="",e.ispost=!1,e.content="",e.description="",e.postdate=new Date().toLocaleDateString())},g=async()=>{try{let n=0;const{data:t}=await T.get("/tripinfos/all");i.push(...t.result),i.forEach(x=>x.idx=n++)}catch(n){m.fire({icon:"error",title:"\u5931\u6557",text:n.isAxiosError?n.response.data.message:n.message})}};return g(),(n,t)=>{const x=se,u=le,$=V("font-awesome-icon"),D=de,M=ue,U=pe,N=ie,L=V("QuillEditor"),G=me,O=ce,W=re,j=ae;return Z(),ee("div",we,[y("div",xe,[y("div",Se,[ve,o(te(z),{class:"addBtn",onClick:t[0]||(t[0]=l=>_("",-1))},{default:r(()=>[Ce]),_:1})]),o(W,{show:e.showModal,"onUpdate:show":t[7]||(t[7]=l=>e.showModal=l),preset:"card",title:e._id.length>0?"\u7DE8\u8F2F\u65C5\u904A\u8CC7\u8A0A":"\u65B0\u589E\u65C5\u904A\u8CC7\u8A0A",style:{width:"800px"},onSubmit:ne(s,["prevent"])},{default:r(()=>[o(O,{ref:"formValid","label-placement":"left",model:e,rules:f},{default:r(()=>[o(u,{label:"\u540D\u7A31",path:"name"},{default:r(()=>[o(x,{value:e.name,"onUpdate:value":t[1]||(t[1]=l=>e.name=l)},null,8,["value"])]),_:1}),o(u,{label:"\u5716\u7247",path:"image"},{default:r(()=>[o(U,{"file-list":e.image,"onUpdate:file-list":t[2]||(t[2]=l=>e.image=l),accept:"image/*","directory-dnd":"",max:1},{default:r(()=>[o(M,null,{default:r(()=>[y("div",ke,[o($,{icon:"fa-solid fa-image"})]),o(D,{style:{"font-size":"16px"}},{default:r(()=>[Te]),_:1})]),_:1})]),_:1},8,["file-list"])]),_:1}),o(u,{label:"\u5275\u4F5C"},{default:r(()=>[E(oe(e.user),1)]),_:1}),o(u,{label:"\u6642\u9593"},{default:r(()=>[o(x,{value:e.postdate,"onUpdate:value":t[3]||(t[3]=l=>e.postdate=l)},null,8,["value"])]),_:1}),o(u,{label:"\u767C\u5E03"},{default:r(()=>[o(N,{checked:e.ispost,"onUpdate:checked":t[4]||(t[4]=l=>e.ispost=l)},null,8,["checked"])]),_:1}),o(u,{label:"\u6558\u8FF0"},{default:r(()=>[o(x,{type:"textarea",value:e.description,"onUpdate:value":t[5]||(t[5]=l=>e.description=l),maxlength:"200","show-count":""},null,8,["value"])]),_:1}),o(u,{label:"\u5167\u5BB9"},{default:r(()=>[y("div",ze,[o(L,{content:e.content,"onUpdate:content":t[6]||(t[6]=l=>e.content=l),toolbar:b,contentType:"html"},null,8,["content","toolbar"])])]),_:1}),o(u,null,{default:r(()=>[o(G,{show:e.submitting},{default:r(()=>[Ee]),_:1},8,["show"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["show","title","onSubmit"]),o(j,{columns:k,data:i,bordered:!1,pagination:d},null,8,["columns","data","pagination"])])])}}};export{je as default};
